<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:cyk="http://primefaces.jsf.web.utility.cyk.org">
	
    <cyk:page value="#{agreementReadPage}">
    	<ui:define name="centerCenter">.
    		<div class="ui-g">
    			<div class="ui-g-12">
    				<div class="ui-g-4">
    					<h:outputText value="Client" />
    				</div>
    				<div class="ui-g-8">
    					<h:outputText value="#{agreementReadPage.agreement.customer}" />
    				</div>
    			</div>
    			<div class="ui-g-12">
    				<div class="ui-g-4">
    					<h:outputText value="Lieu de départ" />
    				</div>
    				<div class="ui-g-8">
    					<h:outputText value="#{agreementReadPage.agreement.departurePlace}" />
    				</div>
    			</div>
    			<div class="ui-g-12">
    				<div class="ui-g-4">
    					<p:button value="Produits" icon="fa fa-pencil" outcome="agreementEditProductsView">
    						<f:param name="entityidentifier" value="#{agreementReadPage.agreement.identifier}"/>
    					</p:button>
    				</div>
    				<div class="ui-g-8">
    					<p:dataTable value="#{agreementReadPage.agreement.products}" var="product">
    						<p:column headerText="Nom"><h:outputText value="#{product.name}" /></p:column>
    						<p:column headerText="Poids en kilogramme"><h:outputText value="#{product.weightInKiloGram}" /></p:column>
    					</p:dataTable>
    				</div>
    			</div>    			
    			<div class="ui-g-12">
    				<div class="ui-g-4">
    					<p:button value="Lieux de déchargement" icon="fa fa-pencil" outcome="agreementEditArrivalPlacesView">
    						<f:param name="entityidentifier" value="#{agreementReadPage.agreement.identifier}"/>
    					</p:button>
    				</div>
    				<div class="ui-g-8">
    					<p:dataTable value="#{agreementReadPage.agreement.arrivalPlaces}" var="arrivalPlace">
    						<p:column headerText="Nom"><h:outputText value="#{arrivalPlace.name}" /></p:column>
    						<p:column headerText="Durée de parcours en minute"><h:outputText value="#{arrivalPlace.durationInMinute}" /></p:column>
    					</p:dataTable>
    				</div>
    			</div>
    			<div class="ui-g-12">
    				<div class="ui-g-4">
    					<p:button value="Camions" icon="fa fa-pencil" outcome="agreementEditTrucksView">
    						<f:param name="entityidentifier" value="#{agreementReadPage.agreement.identifier}"/>
    					</p:button>
    				</div>
    				<div class="ui-g-8">
    					<p:dataTable value="#{agreementReadPage.agreement.trucks}" var="truck">
    						<p:column headerText="Immatriculation"><h:outputText value="#{truck.code}" /></p:column>
    						<p:column headerText="Conducteur"><h:outputText value="#{truck.driver.person.firstName} #{truck.driver.person.lastNames}" /></p:column>
    					</p:dataTable>
    				</div>
    			</div>
    		</div>
    		<p:separator/>
    		<h3><h:outputText value="Cumul des poids par produit" /></h3>
    		<ui:include src="__listCumulByProduct__.xhtml">
    			<ui:param name="agreement" value="#{agreementReadPage.agreement}"></ui:param>
    			<ui:param name="products" value="#{agreementReadPage.agreement.products}"/>
    		</ui:include>
    		<p:separator/>
    		<p:button value="Clore le contrat" outcome="agreementCloseView" icon="fa fa-sign-out" rendered="#{not agreementReadPage.agreement.closed}">
    			<f:param name="entityidentifier" value="#{agreementReadPage.agreement.identifier}"/>
    		</p:button>
    	</ui:define>
    </cyk:page>
    
</html>
